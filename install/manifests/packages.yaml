version: 1.0

metadata:
  description: "Dotfiles package manifest"
  last_updated: "2026-01-03"

# Installation profiles for different use cases
profiles:
  full:
    description: "Complete development environment with all tools"
    includes: [system_libraries, general_tools, language_runtimes, gui_applications]

  dev:
    description: "Developer tools without GUI applications"
    includes: [system_libraries, general_tools, language_runtimes]
    excludes: [gui_applications]

  minimal:
    description: "Essential CLI tools only"
    packages: [git, curl, wget, tmux, tree, pinentry]

  remote:
    description: "Lightweight remote server setup"
    packages: [git, curl, wget, tmux, htop, tree, pinentry, build-essential, pkg-config, libssl-dev]

# Package categories with default priority chains
categories:
  language_runtimes:
    description: "Language interpreters and compilers"
    priority: ["ppa", "homebrew", "mise"]

  general_tools:
    description: "CLI utilities and development tools"
    priority: ["apt", "ppa", "homebrew", "mise"]

  system_libraries:
    description: "System-level libraries and build dependencies"
    priority: ["apt"]

  gui_applications:
    description: "Desktop applications"
    priority: ["homebrew-cask", "flatpak"]

# Package definitions
packages:
  # === General Tools ===

  git:
    category: general_tools
    description: "Version control system"
    priority: ["apt", "homebrew"]
    apt:
      package: git
    homebrew:
      package: git

  curl:
    category: general_tools
    description: "HTTP client"
    apt:
      package: curl
    homebrew:
      package: curl

  wget:
    category: general_tools
    description: "Download utility"
    apt:
      package: wget
    homebrew:
      package: wget

  tmux:
    category: general_tools
    description: "Terminal multiplexer"
    apt:
      package: tmux
    homebrew:
      package: tmux

  htop:
    category: general_tools
    description: "Interactive process viewer"
    apt:
      package: htop
    homebrew:
      package: htop

  tree:
    category: general_tools
    description: "Directory tree viewer"
    apt:
      package: tree
    homebrew:
      package: tree

  pinentry:
    category: general_tools
    description: "GPG passphrase entry dialog"
    apt:
      package: pinentry-tty
    homebrew:
      package: pinentry

  xclip:
    category: general_tools
    description: "X11 clipboard utility"
    platforms: ["ubuntu"]
    apt:
      package: xclip

  # macOS GNU tools
  coreutils:
    category: general_tools
    description: "GNU core utilities"
    platforms: ["macos"]
    homebrew:
      package: coreutils

  gnu-sed:
    category: general_tools
    description: "GNU sed"
    platforms: ["macos"]
    homebrew:
      package: gnu-sed

  gnu-tar:
    category: general_tools
    description: "GNU tar"
    platforms: ["macos"]
    homebrew:
      package: gnu-tar

  grep:
    category: general_tools
    description: "GNU grep"
    platforms: ["macos"]
    homebrew:
      package: grep

  # === System Libraries (Ubuntu) ===

  build-essential:
    category: system_libraries
    description: "GCC, make, and essential build tools"
    platforms: ["ubuntu"]
    apt:
      package: build-essential

  pkg-config:
    category: system_libraries
    description: "Build system helper"
    platforms: ["ubuntu"]
    apt:
      package: pkg-config

  libssl-dev:
    category: system_libraries
    description: "SSL library development headers"
    platforms: ["ubuntu"]
    apt:
      package: libssl-dev

  libreadline-dev:
    category: system_libraries
    description: "Readline library development headers"
    platforms: ["ubuntu"]
    apt:
      package: libreadline-dev

  zlib1g-dev:
    category: system_libraries
    description: "Compression library development headers"
    platforms: ["ubuntu"]
    apt:
      package: zlib1g-dev

  autoconf:
    category: system_libraries
    description: "Automatic configure script builder"
    platforms: ["ubuntu"]
    apt:
      package: autoconf

  automake:
    category: system_libraries
    description: "Tool for generating Makefiles"
    platforms: ["ubuntu"]
    apt:
      package: automake

  libtool:
    category: system_libraries
    description: "Generic library support script"
    platforms: ["ubuntu"]
    apt:
      package: libtool

  libsecret-1-0:
    category: system_libraries
    description: "Library for secure credential storage"
    platforms: ["ubuntu"]
    apt:
      package: libsecret-1-0

  libsecret-1-dev:
    category: system_libraries
    description: "Development headers for libsecret"
    platforms: ["ubuntu"]
    apt:
      package: libsecret-1-dev

  # Desktop environment specific packages
  gnome-keyring:
    category: system_libraries
    description: "GNOME keyring for credential storage"
    platforms: ["ubuntu"]
    desktop_env: ["GNOME", "XFCE", "LXQt", "LXDE"]
    apt:
      package: gnome-keyring

  kwalletmanager:
    category: system_libraries
    description: "KDE Wallet for credential storage"
    platforms: ["ubuntu"]
    desktop_env: ["KDE"]
    apt:
      package: kwalletmanager

  # === Language Runtimes (managed by mise) ===
  # These are defined in mise/config.toml

  ruby:
    category: language_runtimes
    description: "Ruby language runtime"
    managed_by: mise

  python:
    category: language_runtimes
    description: "Python language runtime"
    managed_by: mise

  node:
    category: language_runtimes
    description: "Node.js runtime"
    managed_by: mise

  go:
    category: language_runtimes
    description: "Go language runtime"
    managed_by: mise

  erlang:
    category: language_runtimes
    description: "Erlang language runtime"
    managed_by: mise

  elixir:
    category: language_runtimes
    description: "Elixir language runtime"
    managed_by: mise

  rust:
    category: language_runtimes
    description: "Rust language runtime"
    managed_by: mise

  uv:
    category: language_runtimes
    description: "Python package installer"
    managed_by: mise

  # === CLI Tools (managed by mise) ===
  # The following are managed in mise/config.toml

  jq:
    category: general_tools
    description: "JSON processor"
    managed_by: mise

  fzf:
    category: general_tools
    description: "Fuzzy finder"
    managed_by: mise

  ripgrep:
    category: general_tools
    description: "Fast grep alternative"
    managed_by: mise

  bat:
    category: general_tools
    description: "Cat with syntax highlighting"
    managed_by: mise

  neovim:
    category: general_tools
    description: "Vim-based text editor"
    managed_by: mise

  shellcheck:
    category: general_tools
    description: "Shell script linter"
    managed_by: mise

  eza:
    category: general_tools
    description: "Modern ls replacement"
    managed_by: mise

  fd:
    category: general_tools
    description: "Fast find alternative"
    managed_by: mise

  zoxide:
    category: general_tools
    description: "Smarter cd command"
    managed_by: mise

  dust:
    category: general_tools
    description: "du alternative"
    managed_by: mise

  procs:
    category: general_tools
    description: "ps alternative"
    managed_by: mise

  bottom:
    category: general_tools
    description: "htop/ytop alternative"
    managed_by: mise

  duf:
    category: general_tools
    description: "df alternative"
    managed_by: mise

  httpie:
    category: general_tools
    description: "HTTP client"
    managed_by: mise

  gh:
    category: general_tools
    description: "GitHub CLI"
    managed_by: mise

  lazygit:
    category: general_tools
    description: "Terminal UI for git"
    managed_by: mise

  delta:
    category: general_tools
    description: "Git diff viewer"
    managed_by: mise

  gitleaks:
    category: general_tools
    description: "Secrets detection in git"
    managed_by: mise

  lefthook:
    category: general_tools
    description: "Git hooks manager"
    managed_by: mise

  direnv:
    category: general_tools
    description: "Environment switcher"
    managed_by: mise

  just:
    category: general_tools
    description: "Command runner"
    managed_by: mise

  watchexec:
    category: general_tools
    description: "File watcher"
    managed_by: mise

  tokei:
    category: general_tools
    description: "Code statistics"
    managed_by: mise

  hyperfine:
    category: general_tools
    description: "Benchmarking tool"
    managed_by: mise

  grex:
    category: general_tools
    description: "Regex generator"
    managed_by: mise

  glow:
    category: general_tools
    description: "Markdown renderer"
    managed_by: mise

  yq:
    category: general_tools
    description: "YAML processor"
    managed_by: mise

  # === GUI Applications ===

  ghostty:
    category: gui_applications
    description: "Modern terminal emulator"
    platforms: ["macos"]
    homebrew:
      cask: true
      package: ghostty

# Bulk installation groups for performance optimization
bulk_install_groups:
  system_essentials:
    description: "Core system tools"
    enabled: true
    packages: [git, curl, wget, tree]

  ubuntu_build_tools:
    description: "Build dependencies for Ubuntu"
    enabled: true
    platforms: ["ubuntu"]
    packages: [build-essential, pkg-config, libssl-dev, libreadline-dev, zlib1g-dev, autoconf, automake, libtool]

  ubuntu_libraries:
    description: "System libraries for Ubuntu"
    enabled: true
    platforms: ["ubuntu"]
    packages: [libsecret-1-0, libsecret-1-dev]
