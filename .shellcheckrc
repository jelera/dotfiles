# ShellCheck configuration for dotfiles
# https://github.com/koalaman/shellcheck/wiki/Directive
#
# This config is used by:
# - Local development: shellcheck command reads this automatically
# - Lefthook git hooks: pre-commit hooks use shellcheck
# - GitHub Actions: .github/workflows/lint.yml CI pipeline

# Target bash shell (requires bash 4.0+)
shell=bash

# Treat warnings as errors (fail on any issues)
# Use --severity=warning to only show warnings and above
severity=warning

# Disable following sourced files (SC1091)
# We have proper shellcheck directives in the code
disable=SC1091

# Enable all optional checks
enable=add-default-case
enable=avoid-nullary-conditions
enable=check-unassigned-uppercase
enable=deprecate-which
enable=quote-safe-variables
enable=require-double-brackets

# Bash 4+ features now ALLOWED and ENCOURAGED:
# ✅ readarray/mapfile - Load file lines into array
# ✅ Associative arrays (declare -A/-gA) - O(1) hash lookups for caching
# ✅ &>> redirection - Append stdout and stderr
# ✅ [[ ]] conditional expressions - Modern test syntax
# ✅ String operations - ${var^^}, ${var,,}, ${var@Q}
#
# REQUIREMENT: All scripts using Bash 4+ features MUST check version using:
#   source install/lib/bash-version-check.sh
#   require_bash4 "$0"
#
# Bash 4+ is automatically installed during setup:
#   - macOS: via Homebrew (/opt/homebrew/bin/bash or /usr/local/bin/bash)
#   - Linux: Pre-installed (bash 5.1+ on Ubuntu 22.04/24.04)
